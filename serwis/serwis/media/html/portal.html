<style type="text/css">
    .ok {color: green}
    .notOk {color: red}
</style>

<script type="text/javascript">
	// WALIDACJA NICKU I INDEXU
	$(document).ready(function(){
		// Zdarzenie nastepujace po nacisnieciu klawisz dla pola "Imię"
		$('#fld_loginCheck').keyup(function()
		{
			var reg = /^[a-zA-Z][a-zA-Z0-9-_]{3,32}$/;
			// Login ma zla dlugosc
			if(reg.test($(this).val()) == false)
			{
				document.getElementById('loginRequirements').className = 'notOk';
				document.getElementById('loginUnique').className = 'notOk';
				checkButton();
			}
			// Login ma dobra dlugosc
			else
			{
				document.getElementById('loginRequirements').className = 'ok';
				checkUsername();	//jesli pasuje login to sprawdzamy czy isnieje juz taki w bazie
			}
			
		});

		// Sprawdzanie na bierzaco czy indeks sklada sie z 6 cyfr
		$('#fld_indexNumber').keyup(function()
		{
			var reg = /^[0-9]{6}$/;
			
			if(reg.test($(this).val()) == false)
			{
				document.getElementById('indexLength').className = 'notOk';
				checkButton();
			}
			else
			{
				document.getElementById('indexLength').className = 'ok';
				checkIndexNumber();		//jesli pasuje indeks to sprawdzamy czy isnieje juz taki w bazie
			}
			
		});
		$('#subRepeatVer').click(function(){
			$.post('/repeatVerification', { fld_login_ver: $('#fld_login_ver').val()},
								function(msg) {
									if(msg == "Juz aktywne"){
										alert("Twoje konto zostało już wcześniej aktywowane");
									}
									if(msg == "Nie ma takiego uzytkownika"){
										alert("Nie ma takiego uzytkownika");
									}
									if(msg == "ok"){
										alert("Aktywator został ponownie wysłany do użytkownika");
									}
									loadContent("portal");
								});
		});
	});
	function wysunAktywator(){
		if ($("#repeatVer").css('display')=='none'){
			$("#repeatVer").fadeIn("slow");
		} else {
			$("#repeatVer").fadeOut("slow");
		}
		
	}
</script>
	
				<form method="post" action="/registration" id ="form_register">
					<div class="CLASS">
						<label for="fld_loginCheck">Nazwa użytkownika:</label>
						<div><input class="CLASS" type="text" name="fld_loginCheck" id="fld_loginCheck"/></div>
						<br />
						<label for="fld_indexNumber">Indeks:</label>
						<div><input class="CLASS" type="text" name="fld_indexNumber" id="fld_indexNumber"/></div>
						<br />
						<input class="CLASS" type="submit" name="btn_register" id="btn_register" value="Zarejestruj" disabled=true/>
						<br />
						<br />
						<div style="text-align: left">
						<p id = 'loginRequirements' class = 'notOk'>Login musi mieć od 3 do 32 znaków i nie może zawierać znaków specjalnych ani zaczynać się od cyfry. <p>
						<p id = 'loginUnique' class = 'notOk'>Login musi być unikalny. <p>
						<p id = 'indexLength' class = 'notOk'>Indeks musi składać się z 6 cyfr. <p>
						<p id = 'indexUnique' class = 'notOk'>Indeks nie może znajdować się w bazie. <p>
						</div>

					</div>
				</form>
				<span style="color: red;">{{ alert }} </span>
				<br><br><br>
				<a onclick="wysunAktywator()" style="cursor: pointer" class="CLASS">Nie doszedł mail aktywacyjny?</a>
				<div id="repeatVer" style="display:none">
					<label for="fld_login_ver">Podaj login:</label><input class="CLASS" type="text" name="fld_login_ver" id="fld_login_ver"/>
					<input type="submit" value="Wyślij" id="subRepeatVer"/>
				</div>
				<!-- po wyslaniu formularza idzie do registration.html z portal.html w srodku -->